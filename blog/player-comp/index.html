<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- Icons --> <!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> --> <!-- <link rel="shortcut icon" href="/public/favicon.ico"> --> <link rel="shortcut icon" href="/favicon.ico?"> <!-- RSS (well, actually Atom) --> <link type="application/atom+xml" rel="alternate" href="https://jecutter.github.io/feed.xml" title="Jacob Cutter" /> <!-- Twitter Card and OpenGraph Tags --> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Comp The Player: Classifying NBA Players | Jacob Cutter</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Comp The Player: Classifying NBA Players" /> <meta name="author" content="Jacob Cutter" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Performing informative NBA player comparisons to assess style of play using Random Forest classification." /> <meta property="og:description" content="Performing informative NBA player comparisons to assess style of play using Random Forest classification." /> <link rel="canonical" href="https://jecutter.github.io/blog/player-comp/" /> <meta property="og:url" content="https://jecutter.github.io/blog/player-comp/" /> <meta property="og:site_name" content="Jacob Cutter" /> <meta property="og:image" content="https://jecutter.github.io/files/player_comp/imgonline-com-ua-twotoone-Xzq8ZtqJyh.jpg" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-03-30T00:00:00-07:00" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://jecutter.github.io/files/player_comp/imgonline-com-ua-twotoone-Xzq8ZtqJyh.jpg" /> <meta property="twitter:title" content="Comp The Player: Classifying NBA Players" /> <meta name="twitter:site" content="@jecutter92" /> <meta name="twitter:creator" content="@jecutter92" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jacob Cutter"},"image":"https://jecutter.github.io/files/player_comp/imgonline-com-ua-twotoone-Xzq8ZtqJyh.jpg","description":"Performing informative NBA player comparisons to assess style of play using Random Forest classification.","dateModified":"2020-03-30T00:00:00-07:00","datePublished":"2020-03-30T00:00:00-07:00","headline":"Comp The Player: Classifying NBA Players","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jecutter.github.io/blog/player-comp/"},"url":"https://jecutter.github.io/blog/player-comp/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://jecutter.github.io/files/Cutter-6690_cropped.jpg"},"name":"Jacob Cutter"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- Google Analytics --> <script> window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-162130749-1', 'auto'); ga('send', 'pageview'); </script> <script async src='https://www.google-analytics.com/analytics.js'></script> <!-- MathJax --> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script> </head> <body class="themed"> <aside role="complementary" class="sidebar"> <div class="sidebar-portrait"> <img src="/files/Cutter-6690_cropped.jpg" alt="Portrait of Jacob Cutter"/> </div> <div class="container sidebar-sticky"> <div class="sidebar-about"> <div class="site-title"> <a href="/" title="Home">Jacob Cutter</a> </div> <p class="lead"></p> </div> <nav role="navigation" class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/blog/">Project Portfolio</a> <a class="sidebar-nav-item" href="/papers/">Publications and Talks</a> <!-- Adding a link to my resume --> <!-- <a class="sidebar-nav-item" href="/files/jacob_cutter_resume_3_13_2020.pdf">Resume</a> --> <!-- <a class="sidebar-nav-item" href="/files/jacob_cutter_resume_6_11_2020.pdf">Resume</a> --> <!-- <a class="sidebar-nav-item" href="/files/Jacob_Cutter_Resume_9_11_2020.pdf">Resume</a> --> <a class="sidebar-nav-item" href="/files/Jacob_Cutter_Resume_3_18_2021.pdf">Resume</a> </nav> <small> <!-- &copy; <time datetime="2015-12-31T16:00:00-08:00">2016</time>–<time datetime="2021-03-18T16:54:51-07:00">2021</time>. All rights reserved. --> &copy; 2021. All rights reserved. <br> <!-- <a class="legal" href="/privacy-policy/">Privacy Policy</a> --> </small> </div> </aside> <main role="main" class="content container"> <article role="article" class="post"> <h1 class="post-title">Comp The Player: Classifying NBA Players</h1> <time datetime="2020-03-30T00:00:00-07:00" class="post-date">March 30, 2020</time> <p><img src="/files/player_comp/imgonline-com-ua-twotoone-Xzq8ZtqJyh.jpg" alt="Default image for player comparison project. " /> <!-- ![Welcome to Jacob Cutter's website!](/files/Cutter-6690_cropped.jpg) --></p> <p>With the expansion in popularity of NBA basketball over the years, an enormous amount of data is now being produced from game to game. This no longer is limited to simple counting stats like points, rebounds, and assists – we can now ask questions like: “How many times did Klay Thompson dribble the ball before shooting in the 3rd quarter? How many miles did he run on defense? How many times did he shoot from beyond 24 feet?”</p> <p>I recently spent some time scraping such data from the web in order to do some exploratory analysis on NBA basketball players <a href="https://github.com/jecutter/nba-data-models">(see my Github for code)</a>. One of the simplest questions we can ask is: what defines a player? Not in terms of production or value, but <em>stylistically</em>, how does a player play?</p> <p>In my explorations, I have found that it is difficult to use unsupervised methods such as <em>k</em>-means clustering to define style of play, because the number of features and groups to use becomes highly arbitrary with <em>so many different ways to play</em>.</p> <p>Therefore, I constructed a player classification model, with the target labels being the veteran players themselves. Such a model allows us to find the best “comp” for, say, rookie players who are frequently scouted by NBA front offices searching for cheap talent. With this motivation in mind, let’s see how such a model can be built.</p> <h2 id="a-word-about-random-forest-classification">A Word About Random Forest Classification</h2> <p>A common tool used for regression and classification is the <strong>decision tree</strong>, which is a tree-like structure beginning with a <em>root</em>. From this starting node, which includes the entire sample, the algorithm decides which of the input features provides the most information for differentiating the sample data (i.e. player-seasons). The algorithm then splits the data on this feature.</p> <p>The formula for <em>information gain</em> provided by a new feature is given by the difference between the entropy for the current node, <script type="math/tex">E(X)</script>, and weighted sum of the entropies of the nodes resulting from splitting the data on the new feature, <script type="math/tex">E(X | Y)</script>:</p> <script type="math/tex; mode=display">IG(X, Y) = E(X) - E(X | Y)</script> <p>The entropy of <script type="math/tex">E(X)</script> is simply calculated from each <script type="math/tex">p_i</script> (the probability/proportion of the <script type="math/tex">i</script>th class):</p> <script type="math/tex; mode=display">E(X) = - \sum_i p_i \log{p_i}</script> <p>The entropy <script type="math/tex">E(X | Y)</script> is weighted by number of samples in each resultant node, preventing an insignificant node from dominating the entropy.</p> <p>The algorithm repeats this process for each node, each time computing the information gain for the remaining input features. In this way, a tree is “grown” in descending order of information gain. For a nice, detailed explanation broken down using examples, see <a href="https://towardsdatascience.com/entropy-how-decision-trees-make-decisions-2946b9c18c8">this article</a>.</p> <p>Now, if we can grow a tree, why not grow a forest? A <strong>random forest</strong> is a collection of many decision trees, which is highly advantageous for many problems. Each tree is a random sub-sample of the input training data (a sampling technique known as <em>bootstrapping</em>), and each tree uses a subset of input features. A vote is tallied from each tree’s prediction in order to determine the overall prediction, essentially averaging over all estimators. This entire process is known as <em>bagging</em>, short for <em>bootstrap aggregation</em>.</p> <p>Below is a cartoon from <a href="https://towardsdatascience.com/from-a-single-decision-tree-to-a-random-forest-b9523be65147">this article</a> by Rosaria Silipo and Kathrin Melcher.</p> <figure> <a href="/files/player_comp/random_forest_combined.jpg"> <img src="/files/player_comp/random_forest_combined.jpg" alt="Image of random decision tree forest." /> </a> <figcaption>A random forest of decision trees. At the bottom is a simple example of data bootstrapping and random feature selection for various trees.</figcaption> </figure> <p>The strengths of this algorithm are that it can handle missing values, it automatically accounts for relative feature importance, and it avoids overfitting by cancelling out the large variance associated with each tree.</p> <p>As we will see, our model will consist of 181 output labels, which is the number of veteran players who played for the last 4 complete NBA seasons (2016-2019). Not only are there many labels, but there are also many input features to differentiate style of play. What’s more, we only have 3 samples per label to work with if we leave out one season as a test dataset.</p> <p>For all these reasons, the Random Forest model is the ideal candidate for performing player classification.</p> <h2 id="feature-selection">Feature Selection</h2> <p>Through some exploratory data analysis which I will not thoroughly detail here, combined with some basketball logic and intuition, the input features below were selected for the random forest classification (RFC).</p> <p>Shown is a Python snippet which displays the relevant features in a Pandas dataframe, which was the result of data scraping from a variety of NBA data sources.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Specify which dataframe columns to use as model features
</span><span class="n">feature_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">'height'</span><span class="p">,</span> <span class="s">'weight'</span><span class="p">,</span> <span class="s">'FG_FREQ_05FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_59FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_1014FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_1519FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_2024FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_GT24FT'</span><span class="p">,</span> <span class="s">'FG_FREQ_CANDS'</span><span class="p">,</span> <span class="s">'FTR'</span><span class="p">,</span> <span class="s">'ASTR'</span><span class="p">,</span> <span class="s">'TOR'</span><span class="p">,</span> <span class="s">'ORR'</span><span class="p">,</span> <span class="s">'DRR'</span><span class="p">,</span> <span class="s">'BLK_PH'</span><span class="p">,</span> <span class="s">'STL_PH'</span><span class="p">,</span> <span class="s">'DFGP_PG'</span><span class="p">]</span>

<span class="c1"># Display the dataframe with selected features
</span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">'display.max_columns'</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">+</span> <span class="n">feature_list</span><span class="p">]</span>
</code></pre></div></div> <figure> <a href="/files/player_comp/player_class_features_table.png"> <img src="/files/player_comp/player_class_features_table.png" alt="A Pandas dataframe showing the data used as classifier model input." /> </a> <figcaption></figcaption> </figure> <p>These stats can be summarized as follows:</p> <ul> <li>‘height’ – player height in inches</li> <li>‘weight’ – player weight in lbs</li> <li>‘FG_FREQ_05FT’ – percentage of shots from 0-5 ft. from the basket</li> <li>‘FG_FREQ_59FT’ – percentage of shots from 5-9 ft. from the basket</li> <li>‘FG_FREQ_1014FT’ – percentage of shots from 10-14 ft. from the basket</li> <li>‘FG_FREQ_1519FT’ – percentage of shots from 15-19 ft. from the basket</li> <li>‘FG_FREQ_2024FT’ – percentage of shots from 20-24 ft. from the basket</li> <li>‘FG_FREQ_GT24FT’ – percentage of shots from &gt; 24 ft. from the basket</li> <li>‘FG_FREQ_CANDS’ – percentage of shots that are catch-and-shoot (no dribbles)</li> <li>‘FTR’ – free throw rate</li> <li>‘ASTR’ – assist rate</li> <li>‘TOR’ – turnover rate</li> <li>‘ORR’ – offensive rebounding rate</li> <li>‘DRR’ – defensive rebounding rate</li> <li>‘BLK_PH’ – shot blocks (per 100 possessions)</li> <li>‘STL_PH’ – steals (per 100 possessions)</li> <li>‘DFGP_PG’ – defensive/opponent field goal percentage</li> </ul> <p>Note that <em>height</em> and <em>weight</em> are hardly “play-style” attributes, but rather physical attributes. They are still important since strict lines between player positions, e.g. point guards, shooting guards, centers, etc., are becoming increasingly blurred in the modern NBA, but a player’s size still determines how a player is utilized.</p> <p>The offensive stats are relatively self-explanatory; we largely differentiate a player by where on the floor they take their shots, how often they draw fouls, and how often they make plays or rebound the ball.</p> <p>A player’s defense is more difficult to quantify, however the opponent’s defensive field goal percentage is included to account for man-on-man defense in addition to a player’s blocks and steals.</p> <p>It is worth noting that this list is neither exhaustive nor completely optimized. These resulted in decent accuracy, however there are a variety of unused additional stats that would be interesting to leverage. For example, I have also scraped play-type stats: how often does a player score on pick-and-rolls? Put-backs? Isolation plays? However, this would greatly increase the number of features and statistical interactions have not been thoroughly studied.</p> <h2 id="creating-a-random-forest-model">Creating a Random Forest Model</h2> <p>To create the RFC model, we first separate the input data into veterans and rookies. Here, veterans are all players who played in <em>each</em> season from 2016-2019, while rookies only played in the 2019 season.</p> <p>I then divide the veteran dataset into a training set (3 seasons) and a testing set (the 2019 season), as out-of-sample testing will be used to calculate the unbiased accuracy of our model. I also separate the training and testing datasets into input features and output labels (the player names).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create separate dataframes for established players and rookies
</span><span class="n">df_vets</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">df_vets</span><span class="p">[</span><span class="n">df_vets</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;</span> <span class="mi">2019</span><span class="p">]</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">df_vets</span><span class="p">[</span><span class="n">df_vets</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2019</span><span class="p">]</span>

<span class="n">df_rooks</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[</span><span class="n">df</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span>
<span class="n">df_rooks</span> <span class="o">=</span> <span class="n">df_rooks</span><span class="p">[</span><span class="n">df_rooks</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2019</span><span class="p">]</span>

<span class="c1"># Create input features and target labels (player names) for test data
</span><span class="n">test_labels</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[[</span><span class="s">"name"</span><span class="p">]]</span>
<span class="n">test_features</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[</span><span class="n">feature_list</span><span class="p">]</span>

<span class="c1"># Create matching training dataset using only veterans who are still in the NBA
# (and thus have available training data)
</span><span class="n">train_labels</span> <span class="o">=</span> <span class="n">df_train</span><span class="p">[[</span><span class="s">"name"</span><span class="p">]]</span>
<span class="n">train_features</span> <span class="o">=</span> <span class="n">df_train</span><span class="p">[</span><span class="n">feature_list</span><span class="p">]</span>
</code></pre></div></div> <p>In order to properly fit our input training data, it is also a good idea to scale the input features to unit variance and subtract their means. This is a good habit when training machine learning algorithms to aid in model convergence and avoid feature biases.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Scale features which will be used in model fitting
# (for both training and testing datasets)
</span><span class="n">scale_train</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_features</span><span class="p">)</span>
<span class="n">train_features</span> <span class="o">=</span> <span class="n">scale_train</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">train_features</span><span class="p">)</span>
<span class="n">test_features</span> <span class="o">=</span> <span class="n">scale_train</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test_features</span><span class="p">)</span>
</code></pre></div></div> <p>A comprehensive grid search is performed on the various hyperparameters of the <code class="language-plaintext highlighter-rouge">RandomForestClassifier</code> in scikit-learn, using the <code class="language-plaintext highlighter-rouge">GridSearchCV</code> <em>k</em>-fold cross validation method. This is actually quite time intensive, but worth it given the large number of features and output labels.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Perform a comprehensive grid search to optimize parameters for Random Forest classification
</span><span class="n">n_estimators</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">]</span>
<span class="n">max_depth</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">min_samples_split</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">min_samples_leaf</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">param_grid</span> <span class="o">=</span> <span class="p">{</span><span class="s">'n_estimators'</span><span class="p">:</span> <span class="n">n_estimators</span><span class="p">,</span> <span class="s">'max_depth'</span> <span class="p">:</span> <span class="n">max_depth</span><span class="p">,</span> <span class="s">'min_samples_split'</span> <span class="p">:</span> <span class="n">min_samples_split</span><span class="p">,</span> <span class="s">'min_samples_leaf'</span> <span class="p">:</span> <span class="n">min_samples_leaf</span><span class="p">}</span>
<span class="n">grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">param_grid</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_features</span><span class="p">,</span> <span class="n">train_labels</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>
<span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Optimized hyperparameters:'</span><span class="p">,</span> <span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">)</span>

<span class="n">rfc</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span>
    <span class="n">n_estimators</span><span class="o">=</span><span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">[</span><span class="s">'n_estimators'</span><span class="p">],</span> 
    <span class="n">max_depth</span><span class="o">=</span><span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">[</span><span class="s">'max_depth'</span><span class="p">],</span>
    <span class="n">min_samples_split</span><span class="o">=</span><span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">[</span><span class="s">'min_samples_split'</span><span class="p">],</span>
    <span class="n">min_samples_leaf</span><span class="o">=</span><span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">[</span><span class="s">'min_samples_leaf'</span><span class="p">]</span> <span class="p">)</span>

<span class="n">rfc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_features</span><span class="p">,</span> <span class="n">train_labels</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>
</code></pre></div></div> <p>Once the hyperparameters are optimized, we fit the training data to create our RFC model.</p> <p>The model is then run on our test dataset (the 2019 dataset for each veteran player). The accuracy here is then simply the fraction of veterans that were properly identified with themselves (from previous seasons).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Run the classifier model on the test data
</span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">rfc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_features</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Classified veteran players with an accuracy of"</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">test_labels</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">values</span><span class="o">==</span><span class="n">y_pred</span><span class="p">)</span><span class="o">*</span><span class="mf">100.</span><span class="o">/</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span><span class="o">*</span><span class="mf">1.</span><span class="p">),</span> <span class="s">"</span><span class="si">%</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Output:
Classified veteran players with an accuracy of 92.81767955801105 %
</code></pre></div></div> <p>As we can see, we correctly predict that veteran players are themselves with great accuracy, despite season-to-season variation. This is not far-fetched, since we are providing the player’s physical attributes, however given fluctuations in the other stats this is still a solid result.</p> <h2 id="results-for-rookies-in-the-2019-season">Results for Rookies in the 2019 Season</h2> <p>Once we have a trained and tested model, we can ideally run the classifier on any player not used in the training data to find their best player “comp”.</p> <p>It is worth noting: this is <em>not</em> a comparison of production or value. Aside from defensive FGP, the features used in the model are <em>rate</em> or <em>frequency</em> stats meant to characterize play style rather than performance.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Format rookie dataset for input into the classifier and 
# attempt to classify rookies by their most similar veteran counterpart
</span><span class="n">pred_labels</span> <span class="o">=</span> <span class="n">df_rooks</span><span class="p">[[</span><span class="s">"name"</span><span class="p">]]</span>
<span class="n">pred_features</span> <span class="o">=</span> <span class="n">df_rooks</span><span class="p">[</span><span class="n">feature_list</span><span class="p">]</span>

<span class="n">pred_features</span> <span class="o">=</span> <span class="n">scale_train</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">pred_features</span><span class="p">)</span>
<span class="n">rook_pred</span> <span class="o">=</span> <span class="n">rfc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">pred_features</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">pred</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rook_pred</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Predicted that Rookie"</span><span class="p">,</span> <span class="n">pred_labels</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s">"is similar to Player:"</span><span class="p">,</span> <span class="n">pred</span><span class="p">)</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Output:
Predicted that Rookie Aaron Holiday is similar to Player: Isaiah Canaan
Predicted that Rookie Alfonzo McKinnie is similar to Player: JaMychal Green
Predicted that Rookie Boban Marjanovic is similar to Player: Jusuf Nurkic
Predicted that Rookie Bonzie Colson is similar to Player: PJ Tucker
Predicted that Rookie Brandon Sampson is similar to Player: Jordan Clarkson
Predicted that Rookie Bruce Brown is similar to Player: Tyreke Evans
Predicted that Rookie Cameron Reynolds is similar to Player: Wesley Matthews
Predicted that Rookie Chandler Hutchison is similar to Player: Justise Winslow
Predicted that Rookie Cheick Diallo is similar to Player: Taj Gibson
Predicted that Rookie Christian Wood is similar to Player: Karl-Anthony Towns
Predicted that Rookie DJ Wilson is similar to Player: Markieff Morris
Predicted that Rookie Daniel Hamilton is similar to Player: D<span class="s1">'Angelo Russell
Predicted that Rookie Daryl Macon is similar to Player: Kemba Walker
Predicted that Rookie De'</span>Aaron Fox is similar to Player: Jeff Teague
Predicted that Rookie De<span class="s1">'Anthony Melton is similar to Player: Tyus Jones
Predicted that Rookie Deandre Ayton is similar to Player: Alex Len
Predicted that Rookie Deng Adel is similar to Player: Klay Thompson
Predicted that Rookie Derrick White is similar to Player: Cory Joseph
Predicted that Rookie Devin Robinson is similar to Player: Giannis Antetokounmpo
Predicted that Rookie Deyonta Davis is similar to Player: Cody Zeller
Predicted that Rookie Donte DiVincenzo is similar to Player: Eric Gordon
Predicted that Rookie Duncan Robinson is similar to Player: Kyle Korver
Predicted that Rookie Dwayne Bacon is similar to Player: Tobias Harris
Predicted that Rookie Furkan Korkmaz is similar to Player: Terrence Ross
Predicted that Rookie Gary Clark is similar to Player: Kyle Korver
Predicted that Rookie Henry Ellenson is similar to Player: Frank Kaminsky
Predicted that Rookie Isaiah Briscoe is similar to Player: TJ McConnell
Predicted that Rookie Ivan Rabb is similar to Player: Taj Gibson
Predicted that Rookie Jake Layman is similar to Player: Aaron Gordon
Predicted that Rookie Jalen Brunson is similar to Player: Tyus Jones
Predicted that Rookie James Nunnally is similar to Player: Tony Snell
Predicted that Rookie Jaron Blossomgame is similar to Player: Tobias Harris
Predicted that Rookie Jaylen Adams is similar to Player: Tyus Jones
Predicted that Rookie Jemerrio Jones is similar to Player: Rajon Rondo
Predicted that Rookie Jevon Carter is similar to Player: Raymond Felton
Predicted that Rookie John Jenkins is similar to Player: JJ Redick
Predicted that Rookie Johnathan Williams is similar to Player: Kenneth Faried
Predicted that Rookie Jonah Bolden is similar to Player: Nikola Mirotic
Predicted that Rookie Josh Jackson is similar to Player: Andrew Wiggins
Predicted that Rookie Josh Okogie is similar to Player: Victor Oladipo
Predicted that Rookie Julian Washburn is similar to Player: Nicolas Batum
Predicted that Rookie Kadeem Allen is similar to Player: TJ McConnell
Predicted that Rookie Keita Bates-Diop is similar to Player: Jeff Green
Predicted that Rookie Kenrich Williams is similar to Player: Thabo Sefolosha
Predicted that Rookie Kevin Huerter is similar to Player: D'</span>Angelo Russell
Predicted that Rookie Khem Birch is similar to Player: Kenneth Faried
Predicted that Rookie Landry Shamet is similar to Player: Marco Belinelli
Predicted that Rookie Luka Doncic is similar to Player: James Harden
Predicted that Rookie Malik Beasley is similar to Player: Courtney Lee
Predicted that Rookie Malik Monk is similar to Player: Langston Galloway
Predicted that Rookie Mikal Bridges is similar to Player: Thabo Sefolosha
Predicted that Rookie Miles Bridges is similar to Player: Justise Winslow
Predicted that Rookie Monte Morris is similar to Player: Dennis Schroder
Predicted that Rookie Moritz Wagner is similar to Player: Kelly Olynyk
Predicted that Rookie Rawle Alkins is similar to Player: JaMychal Green
Predicted that Rookie Ray Spalding is similar to Player: John Henson
Predicted that Rookie Rodions Kurucs is similar to Player: Maurice Harkless
Predicted that Rookie Ryan Broekhoff is similar to Player: Kyle Korver
Predicted that Rookie Semi Ojeleye is similar to Player: Stanley Johnson
Predicted that Rookie Shai Gilgeous-Alexander is similar to Player: Shaun Livingston
Predicted that Rookie Shake Milton is similar to Player: Josh Richardson
Predicted that Rookie Terrance Ferguson is similar to Player: Justin Holiday
Predicted that Rookie Theo Pinson is similar to Player: Vince Carter
Predicted that Rookie Thomas Bryant is similar to Player: DeMarcus Cousins
Predicted that Rookie Trae Young is similar to Player: Jeff Teague
Predicted that Rookie Tyler Dorsey is similar to Player: Zach LaVine
Predicted that Rookie Yuta Watanabe is similar to Player: Evan Turner
Predicted that Rookie Zach Collins is similar to Player: Karl-Anthony Towns
Predicted that Rookie Zhaire Smith is similar to Player: Damian Lillard
</code></pre></div></div> <p>Shown above are the predictions for each 2019 rookie. Just to get a sense that these comparisons are sensible, let’s dive into an example.</p> <h2 id="an-example-comparison">An Example Comparison</h2> <p>Our classifier algorithm found Landry Shamet and Marco Belinelli to have matching play styles. Shamet came into the league with low expectations, but was a pleasant surprise and made an early impact as a shooter on the L.A. Clippers. Belinelli is a veteran player also known for his exceptional shooting skills off the bench.</p> <p>We can simply plot these players in a number of feature spaces and examine how similar they really are.</p> <figure> <a href="/files/player_comp/shamet_belinelli_comp.png"> <img src="/files/player_comp/shamet_belinelli_comp.png" alt="Comparison plots for Landry Shamet and Marco Belinelli." /> </a> <figcaption>A comparison of Landry Shamet (black) and Marco Belinelli's seasons (red).</figcaption> </figure> <p>As we can see, they are indeed very similar. They are both lanky shooting guards who like to shoot deep 3-pointers. They are both limited play-makers who get around half their shots from catch-and-shoot action (i.e. without dribbling before the shot). Belinelli tended to shoot more free throws over the last few years, but this could merely indicate that he is older and more experienced with drawing fouls.</p> <h2 id="why-is-this-useful">Why is this useful?</h2> <p>NBA team front offices and scouting teams spend an enormous amount of time scouting and evaluating players. Scouts fly all over the world to watch players live, they organize workouts to perform the “eye test”, and the media often portrays a player in a light that effectively skews general perception.</p> <p>In short, biases are a part of the evaluation system. This algorithm is a method for providing a direct comparison with veteran players who are successful enough to have found a role in the league.</p> <p>Not only does this classification tool provide an unbiased label that may not have been considered by glancing at a box score, it also allows front offices to seek out cheap talent to fill a specific role. If a rebuilding team is looking for a young backup catch-and-shoot guard who plays tenacious defense, this algorithm may indicate which players are closer to Klay Thompson than James Harden.</p> </article> <!-- Share Buttons --> <aside role="complementary" class="sharing"> <!-- The Buttons --> <ul class="rrssb-buttons clearfix"> <!-- Facebook --> <li class="rrssb-facebook"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://jecutter.github.io/blog/player-comp/" class="popup"> <span class="rrssb-icon"> <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"/></svg> </span> <span class="rrssb-text">Facebook</span> </a> </li> <!-- Twitter --> <li class="rrssb-twitter"> <a href="https://twitter.com/intent/tweet?text=Comp+The+Player%3A+Classifying+NBA+Players&amp;via=jecutter92&amp;url=https://jecutter.github.io/blog/player-comp/" class="popup"> <span class="rrssb-icon"> <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62a15.093 15.093 0 0 1-8.86-2.32c2.702.18 5.375-.648 7.507-2.32a5.417 5.417 0 0 1-4.49-3.64c.802.13 1.62.077 2.4-.154a5.416 5.416 0 0 1-4.412-5.11 5.43 5.43 0 0 0 2.168.387A5.416 5.416 0 0 1 2.89 4.498a15.09 15.09 0 0 0 10.913 5.573 5.185 5.185 0 0 1 3.434-6.48 5.18 5.18 0 0 1 5.546 1.682 9.076 9.076 0 0 0 3.33-1.317 5.038 5.038 0 0 1-2.4 2.942 9.068 9.068 0 0 0 3.02-.85 5.05 5.05 0 0 1-2.48 2.71z"/></svg> </span> <span class="rrssb-text">Twitter</span> </a> </li> <!-- LinkedIn --> <li class="rrssb-linkedin"> <!-- Replace href with your meta and URL information --> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://jecutter.github.io/blog/player-comp/&amp;title=Comp+The+Player%3A+Classifying+NBA+Players&amp;summary=Performing+informative+NBA+player+comparisons+to+assess+style+of+play+using+Random+Forest+classification.%0A&amp;source=AlexGude.com" class="popup"> <span class="rrssb-icon"> <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"/></svg> </span> <span class="rrssb-text">LinkedIn</span> </a> </li> <!-- RRSSB Scripts --> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> <script> window.jQuery || document.write('<script src="js/vendor/jquery.1.10.2.min.js"><\/script>') </script> <script src="/public/js/rrssb.min.js"></script> </ul> </aside> <!-- Related and Recent Posts --> <!-- Related Posts --> <aside role="complementary" class="related"> <h2>Related Posts</h2> <div class="card-grid"> <div class="card-element card-image"> <a href="/blog/rapm-model/"> <img src="/files/rapm_model/steph_mccaw.jpg" alt="Default image for RAPM project. "> </a> </div> <div class="card-element card-text"> <a href="/blog/rapm-model/"> <strong>An RAPM Model to Assess NBA Players</strong> </a> <br> Developing a lineup-independent NBA player impact model using ridge regression techniques on play-by-play data. </div> </div> </aside> </main> <script> window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-162130749-1', 'auto'); ga('send', 'pageview'); </script> <script async src='https://www.google-analytics.com/analytics.js'></script> </body> </html>
